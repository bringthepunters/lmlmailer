<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arabic Translation Test (Updated)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            direction: ltr;
        }
        .arabic {
            direction: rtl;
            text-align: right;
        }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .result {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>Arabic Translation Test (Updated)</h1>
    
    <h2>Test Content</h2>
    <pre id="testContent">
=== MELBOURNE GIG GUIDE - Sunday, March 23, 2025 ===

Melbourne's vibrant live music scene offers everything from intimate jazz clubs to stadium rock concerts. With over 460 live music venues, it's one of the world's leading music cities.

--- GIGS NEAR YOU ---

â–¶ 1. QUEENS OF THE WEST LIVE AT THE CATFISH
   ğŸ¢ The Catfish | 1.4 km away
   ğŸ“ 30 Gertrude St, Fitzroy
   ğŸ•’ 16:00 | ğŸ’² Check venue
   ğŸ—ºï¸ https://maps.app.goo.gl/9y94NxuVvW5kefuQ8
   QR: https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https%3A%2F%2Fmaps.app.goo.gl%2F9y94NxuVvW5kefuQ8&margin=1&qzone=1
   ----------------------
â–¶ 2. Kyle Brew
   ğŸ¢ The Standard Hotel | 1.9 km away
   ğŸ“ 419 Fitzroy St Fitzroy
   ğŸ•’ 17:00 | ğŸ’² Check venue
   ğŸ—ºï¸ https://www.google.com/maps/place/The+Standard+Hotel/@-37.8007371,144.9738336,17z/data=!4m10!1m2!2m1!1sthe+standard+hotel!3m6!1s0x6ad642d8d9bd0aeb:0x4b995a3f5ae64d05!8m2!3d-37.8007371!4d144.9768234!15sChJ0aGUgc3RhbmRhcmQgaG90ZWwiA4gBAVoUIhJ0aGUgc3RhbmRhcmQgaG90ZWySAQNwdWLgAQA!16s%2Fg%2F1tczw22p?entry=ttu
   QR: https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fplace%2FThe%2BStandard%2BHotel%2F%40-37.8007371%2C144.9738336%2C17z%2Fdata%3D!4m10!1m2!2m1!1sthe%2Bstandard%2Bhotel!3m6!1s0x6ad642d8d9bd0aeb%3A0x4b995a3f5ae64d05!8m2!3d-37.8007371!4d144.9768234!15sChJ0aGUgc3RhbmRhcmQgaG90ZWwiA4gBAVoUIhJ0aGUgc3RhbmRhcmQgaG90ZWySAQNwdWLgAQA!16s%252Fg%252F1tczw22p%3Fentry%3Dttu&margin=1&qzone=1
   ----------------------

=== HOW TO USE ===
â€¢ View on mobile to scan QR codes directly from screen
â€¢ QR codes link to venue locations on Google Maps
â€¢ Share this guide with friends!

---
This information was sent to Test User at test@example.com.
Melbourne Gig Guide - Supporting local music and venues.
    </pre>

    <button id="translateBtn">Translate to Arabic</button>
    
    <div class="result">
        <h2>Translation Result</h2>
        <pre id="translationResult" class="arabic">Click the button to see the translation result</pre>
    </div>

    <script>
        // Mock implementation of the translation service
        const sentenceTranslations = {
            'ar': { // Arabic - comprehensive full phrases
                'Melbourne\'s vibrant live music scene offers everything from intimate jazz clubs to stadium rock concerts.': 'ØªÙ‚Ø¯Ù… Ø³Ø§Ø­Ø© Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø­ÙŠØ© Ø§Ù„Ù†Ø§Ø¨Ø¶Ø© Ø¨Ø§Ù„Ø­ÙŠØ§Ø© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù† ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ù† Ù†ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø¬Ø§Ø² Ø§Ù„Ø­Ù…ÙŠÙ…Ø© Ø¥Ù„Ù‰ Ø­ÙÙ„Ø§Øª Ø§Ù„Ø±ÙˆÙƒ ÙÙŠ Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨.',
                'With over 460 live music venues, it\'s one of the world\'s leading music cities.': 'Ù…Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 460 Ù‚Ø§Ø¹Ø© Ø­ÙÙ„Ø§Øª Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© Ø­ÙŠØ©ØŒ ØªØ¹Ø¯ ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© Ø§Ù„Ø±Ø§Ø¦Ø¯Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù….',
                'MELBOURNE GIG GUIDE': 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù†',
                'GIGS NEAR YOU': 'Ø¹Ø±ÙˆØ¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù†Ùƒ',
                'HOW TO USE': 'ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
                'View on mobile to scan QR codes directly from screen': 'Ø§Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„ Ù„Ù…Ø³Ø­ Ø±Ù…ÙˆØ² QR Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©',
                'QR codes link to venue locations on Google Maps': 'Ø±Ù…ÙˆØ² QR ØªØ±Ø¨Ø· Ø¨Ù…ÙˆØ§Ù‚Ø¹ Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ø­ÙÙ„Ø§Øª Ø¹Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„',
                'Share this guide with friends!': 'Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡!',
                'This information was sent to': 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ù„Ù‰',
                'Melbourne Gig Guide - Supporting local music and venues.': 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù† - Ø¯Ø¹Ù… Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ø­ÙÙ„Ø§Øª.',
                'km away': 'ÙƒÙ… Ø¨Ø¹ÙŠØ¯Ø§',
                'Check venue': 'ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø© Ø§Ù„Ø­ÙÙ„Ø§Øª',
                'Free': 'Ù…Ø¬Ø§Ù†ÙŠ',
                'TBA': 'Ø³ÙŠØªÙ… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ø§Ø­Ù‚Ù‹Ø§'
            }
        };

        const properNameTranslations = {
            'ar': {
                'Melbourne': 'Ù…Ù„Ø¨ÙˆØ±Ù†',
                'Fitzroy': 'ÙÙŠØªØ²Ø±ÙˆÙŠ',
                'Richmond': 'Ø±ÙŠØªØ´Ù…ÙˆÙ†Ø¯',
                'venue': 'Ù‚Ø§Ø¹Ø© Ø§Ù„Ø­ÙÙ„Ø§Øª',
                'venues': 'Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ø­ÙÙ„Ø§Øª',
                'gig': 'Ø¹Ø±Ø¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠ',
                'gigs': 'Ø¹Ø±ÙˆØ¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©',
                'concert': 'Ø­ÙÙ„Ø© Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©',
                'concerts': 'Ø­ÙÙ„Ø§Øª Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©',
                'music': 'Ù…ÙˆØ³ÙŠÙ‚Ù‰',
                'musical': 'Ù…ÙˆØ³ÙŠÙ‚ÙŠ',
                'guide': 'Ø¯Ù„ÙŠÙ„',
                'near': 'Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù†',
                'you': 'Ù…Ù†Ùƒ',
                'check': 'ØªØ­Ù‚Ù‚ Ù…Ù†',
            }
        };

        function translateToArabic(text) {
            // Split the text into sections
            const sections = {
                header: '',
                description: '',
                gigsHeader: '',
                gigs: [],
                howToUse: '',
                footer: ''
            };

            // Extract sections using regex
            const headerMatch = text.match(/=== MELBOURNE GIG GUIDE - (.+?) ===/);
            if (headerMatch) {
                sections.date = headerMatch[1];
            }

            const descriptionMatch = text.match(/=== MELBOURNE GIG GUIDE - .+? ===\s+\n\s*(.+?)(?=\s*\n\s*---)/s);
            if (descriptionMatch) {
                sections.description = descriptionMatch[1].trim();
            }

            // Extract gigs
            const gigsRegex = /â–¶ (\d+)\. (.+)[\s\S]*?ğŸ¢ (.+) \| ([\d.]+ km away)[\s\S]*?ğŸ“ (.+)[\s\S]*?ğŸ•’ (.+) \| ğŸ’² (.+)[\s\S]*?(?:ğŸµ (.+)[\s\S]*?)?ğŸ—ºï¸ (.+)[\s\S]*?QR: (.+)/g;
            let gigMatch;
            while ((gigMatch = gigsRegex.exec(text)) !== null) {
                sections.gigs.push({
                    number: gigMatch[1],
                    name: gigMatch[2],
                    venue: gigMatch[3],
                    distance: gigMatch[4],
                    address: gigMatch[5],
                    time: gigMatch[6],
                    price: gigMatch[7],
                    genres: gigMatch[8] ? gigMatch[8].split(',').map(g => g.trim()) : [],
                    mapUrl: gigMatch[9],
                    qrUrl: gigMatch[10]
                });
            }

            // Extract how to use section
            const howToUseMatch = text.match(/=== HOW TO USE ===\s+\n([\s\S]*?)(?=\s*\n\s*---)/);
            if (howToUseMatch) {
                sections.howToUse = howToUseMatch[1].trim();
            }

            // Extract footer
            const footerMatch = text.match(/---\s+\n([\s\S]*?)$/);
            if (footerMatch) {
                sections.footer = footerMatch[1].trim();
            }

            // Now translate each section
            let translatedContent = '';

            // Header (with the date preserved)
            translatedContent += `=== Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù† - ${sections.date} ===\n\n`;

            // Description
            translatedContent += translateParagraph(sections.description, 'ar') + '\n\n';

            // Gigs near you header
            translatedContent += '--- Ø¹Ø±ÙˆØ¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù†Ùƒ ---\n\n';

            // Gigs
            sections.gigs.forEach((gig, index) => {
                let translatedGig = `â–¶ ${gig.number}. ${gig.name}\n`;
                translatedGig += `   ğŸ¢ ${gig.venue} | ${gig.distance.replace('km away', 'ÙƒÙ… Ø¨Ø¹ÙŠØ¯Ø§')}\n`;
                translatedGig += `   ğŸ“ ${gig.address}\n`;
                translatedGig += `   ğŸ•’ ${gig.time} | ğŸ’² ${translatePhrase(gig.price, 'ar')}\n`;
                
                if (gig.genres && gig.genres.length > 0) {
                    translatedGig += `   ğŸµ ${gig.genres.join(', ')}\n`;
                }
                
                translatedGig += `   ğŸ—ºï¸ ${gig.mapUrl}\n`;
                
                // Fix for Arabic translation - ensure we're using the correct terms
                translatedGig = translatedGig.replace(/Ù…ÙƒØ§Ù†/g, 'Ù‚Ø§Ø¹Ø© Ø§Ù„Ø­ÙÙ„Ø§Øª');
                translatedGig = translatedGig.replace(/Ù…ÙƒØ§Ù†Ù‹Ø§/g, 'Ù‚Ø§Ø¹Ø© Ø­ÙÙ„Ø§Øª');
                translatedGig = translatedGig.replace(/Ø­ÙÙ„Ø©/g, 'Ø¹Ø±Ø¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠ');
                translatedGig = translatedGig.replace(/Ø­ÙÙ„Ø§Øª/g, 'Ø¹Ø±ÙˆØ¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©');
                
                translatedGig += `   Ø±Ù…Ø² Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©: ${gig.qrUrl}\n`;
                translatedGig += '   ----------------------\n';
                
                translatedContent += translatedGig;
            });

            // How to use
            translatedContent += '\n=== ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ===\n';
            const howToUseLines = sections.howToUse.split('\n');
            howToUseLines.forEach(line => {
                if (line.trim()) {
                    translatedContent += translatePhrase(line.trim(), 'ar') + '\n';
                }
            });

            // Footer
            translatedContent += '\n---\n';
            const footerLines = sections.footer.split('\n');
            if (footerLines.length >= 2) {
                const subscriberInfo = footerLines[0];
                const subscriberMatch = subscriberInfo.match(/This information was sent to (.+) at (.+)\./);
                if (subscriberMatch) {
                    translatedContent += `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ù„Ù‰ ${subscriberMatch[1]} Ø¹Ù„Ù‰ ${subscriberMatch[2]}.\n`;
                } else {
                    translatedContent += translatePhrase(subscriberInfo, 'ar') + '\n';
                }
                
                translatedContent += 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© ÙÙŠ Ù…Ù„Ø¨ÙˆØ±Ù† - Ø¯Ø¹Ù… Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ø­ÙÙ„Ø§Øª.\n';
            } else {
                footerLines.forEach(line => {
                    if (line.trim()) {
                        translatedContent += translatePhrase(line.trim(), 'ar') + '\n';
                    }
                });
            }

            // Final pass to ensure all instances are properly translated
            translatedContent = translatedContent.replace(/Ù…ÙƒØ§Ù†/g, 'Ù‚Ø§Ø¹Ø© Ø§Ù„Ø­ÙÙ„Ø§Øª');
            translatedContent = translatedContent.replace(/Ù…ÙƒØ§Ù†Ù‹Ø§/g, 'Ù‚Ø§Ø¹Ø© Ø­ÙÙ„Ø§Øª');
            translatedContent = translatedContent.replace(/Ø­ÙÙ„Ø©/g, 'Ø¹Ø±Ø¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠ');
            translatedContent = translatedContent.replace(/Ø­ÙÙ„Ø§Øª/g, 'Ø¹Ø±ÙˆØ¶ Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©');
            translatedContent = translatedContent.replace(/Ø¯Ù„ÙŠÙ„ Ø­ÙÙ„Ø§Øª/g, 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©');

            return translatedContent;
        }

        function translatePhrase(phrase, targetLang) {
            // Check if we have a direct translation
            if (sentenceTranslations[targetLang] && sentenceTranslations[targetLang][phrase]) {
                return sentenceTranslations[targetLang][phrase];
            }
            
            // Try to translate proper names
            let translatedPhrase = phrase;
            if (properNameTranslations[targetLang]) {
                for (const [original, translated] of Object.entries(properNameTranslations[targetLang])) {
                    const regex = new RegExp(`\\b${original}\\b`, 'gi');
                    translatedPhrase = translatedPhrase.replace(regex, translated);
                }
            }
            
            // If no direct translation found, return original with [AR] prefix
            if (translatedPhrase === phrase) {
                return `[${targetLang.toUpperCase()}] ${phrase}`;
            }
            
            return translatedPhrase;
        }

        function translateParagraph(paragraph, targetLang) {
            // Split paragraph into sentences
            const sentences = paragraph.split(/(?<=[.!?])\s+/);
            
            // Translate each sentence
            const translatedSentences = sentences.map(sentence => 
                translatePhrase(sentence, targetLang)
            );
            
            // Join sentences back together
            return translatedSentences.join(' ');
        }

        document.getElementById('translateBtn').addEventListener('click', function() {
            const testContent = document.getElementById('testContent').textContent;
            const translatedContent = translateToArabic(testContent);
            document.getElementById('translationResult').textContent = translatedContent;
        });
    </script>
</body>
</html>