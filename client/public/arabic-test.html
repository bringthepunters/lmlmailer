<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arabic Translation Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .result {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>Arabic Translation Test</h1>
    
    <h2>Test Content</h2>
    <pre id="testContent">
=== MELBOURNE GIG GUIDE - Sunday, March 23, 2025 ===

Melbourne's vibrant live music scene offers everything from intimate jazz clubs to stadium rock concerts. With over 460 live music venues, it's one of the world's leading music cities.

--- GIGS NEAR YOU ---

‚ñ∂ 1. QUEENS OF THE WEST LIVE AT THE CATFISH
   üè¢ The Catfish | 1.4 km away
   üìç 30 Gertrude St, Fitzroy
   üïí 16:00 | üí≤ Check venue
   üó∫Ô∏è https://maps.app.goo.gl/9y94NxuVvW5kefuQ8
   QR: https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https%3A%2F%2Fmaps.app.goo.gl%2F9y94NxuVvW5kefuQ8&margin=1&qzone=1
   ----------------------
‚ñ∂ 2. Kyle Brew
   üè¢ The Standard Hotel | 1.9 km away
   üìç 419 Fitzroy St Fitzroy
   üïí 17:00 | üí≤ Check venue
   üó∫Ô∏è https://www.google.com/maps/place/The+Standard+Hotel/@-37.8007371,144.9738336,17z/data=!4m10!1m2!2m1!1sthe+standard+hotel!3m6!1s0x6ad642d8d9bd0aeb:0x4b995a3f5ae64d05!8m2!3d-37.8007371!4d144.9768234!15sChJ0aGUgc3RhbmRhcmQgaG90ZWwiA4gBAVoUIhJ0aGUgc3RhbmRhcmQgaG90ZWySAQNwdWLgAQA!16s%2Fg%2F1tczw22p?entry=ttu
   QR: https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fplace%2FThe%2BStandard%2BHotel%2F%40-37.8007371%2C144.9738336%2C17z%2Fdata%3D!4m10!1m2!2m1!1sthe%2Bstandard%2Bhotel!3m6!1s0x6ad642d8d9bd0aeb%3A0x4b995a3f5ae64d05!8m2!3d-37.8007371!4d144.9768234!15sChJ0aGUgc3RhbmRhcmQgaG90ZWwiA4gBAVoUIhJ0aGUgc3RhbmRhcmQgaG90ZWySAQNwdWLgAQA!16s%252Fg%252F1tczw22p%3Fentry%3Dttu&margin=1&qzone=1
   ----------------------

=== HOW TO USE ===
‚Ä¢ View on mobile to scan QR codes directly from screen
‚Ä¢ QR codes link to venue locations on Google Maps
‚Ä¢ Share this guide with friends!

---
This information was sent to Test User at test@example.com.
Melbourne Gig Guide - Supporting local music and venues.
    </pre>

    <button id="translateBtn">Translate to Arabic</button>
    
    <div class="result">
        <h2>Translation Result</h2>
        <pre id="translationResult">Click the button to see the translation result</pre>
    </div>

    <script>
        // Mock implementation of the translation service
        const sentenceTranslations = {
            'ar': { // Arabic - comprehensive full phrases
                'Melbourne\'s vibrant live music scene offers everything from intimate jazz clubs to stadium rock concerts.': 'ÿ™ŸÇÿØŸÖ ÿ≥ÿßÿ≠ÿ© ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑÿ≠Ÿäÿ© ÿßŸÑŸÜÿßÿ®ÿ∂ÿ© ÿ®ÿßŸÑÿ≠Ÿäÿßÿ© ŸÅŸä ŸÖŸÑÿ®Ÿàÿ±ŸÜ ŸÉŸÑ ÿ¥Ÿäÿ° ŸÖŸÜ ŸÜŸàÿßÿØŸä ÿßŸÑÿ¨ÿßÿ≤ ÿßŸÑÿ≠ŸÖŸäŸÖÿ© ÿ•ŸÑŸâ ÿ≠ŸÅŸÑÿßÿ™ ÿßŸÑÿ±ŸàŸÉ ŸÅŸä ÿßŸÑŸÖŸÑÿßÿπÿ®.',
                'With over 460 live music venues, it\'s one of the world\'s leading music cities.': 'ŸÖÿπ ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 460 ŸÇÿßÿπÿ© ÿ≠ŸÅŸÑÿßÿ™ ŸÖŸàÿ≥ŸäŸÇŸäÿ© ÿ≠Ÿäÿ©ÿå ÿ™ÿπÿØ Ÿàÿßÿ≠ÿØÿ© ŸÖŸÜ ÿßŸÑŸÖÿØŸÜ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸäÿ© ÿßŸÑÿ±ÿßÿ¶ÿØÿ© ŸÅŸä ÿßŸÑÿπÿßŸÑŸÖ.',
                'MELBOURNE GIG GUIDE': 'ÿØŸÑŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸäÿ© ŸÅŸä ŸÖŸÑÿ®Ÿàÿ±ŸÜ',
                'GIGS NEAR YOU': 'ÿπÿ±Ÿàÿ∂ ŸÖŸàÿ≥ŸäŸÇŸäÿ© ÿ®ÿßŸÑŸÇÿ±ÿ® ŸÖŸÜŸÉ',
                'HOW TO USE': 'ŸÉŸäŸÅŸäÿ© ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ',
                'View on mobile to scan QR codes directly from screen': 'ÿßÿπÿ±ÿ∂ ÿπŸÑŸâ ÿßŸÑŸáÿßÿ™ŸÅ ÿßŸÑŸÖÿ≠ŸÖŸàŸÑ ŸÑŸÖÿ≥ÿ≠ ÿ±ŸÖŸàÿ≤ QR ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖŸÜ ÿßŸÑÿ¥ÿßÿ¥ÿ©',
                'QR codes link to venue locations on Google Maps': 'ÿ±ŸÖŸàÿ≤ QR ÿ™ÿ±ÿ®ÿ∑ ÿ®ŸÖŸàÿßŸÇÿπ ŸÇÿßÿπÿßÿ™ ÿßŸÑÿ≠ŸÅŸÑÿßÿ™ ÿπŸÑŸâ ÿÆÿ±ÿßÿ¶ÿ∑ ÿ¨Ÿàÿ¨ŸÑ',
                'Share this guide with friends!': 'ÿ¥ÿßÿ±ŸÉ Ÿáÿ∞ÿß ÿßŸÑÿØŸÑŸäŸÑ ŸÖÿπ ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°!',
                'This information was sent to': 'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ŸÑŸâ',
                'Melbourne Gig Guide - Supporting local music and venues.': 'ÿØŸÑŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸäÿ© ŸÅŸä ŸÖŸÑÿ®Ÿàÿ±ŸÜ - ÿØÿπŸÖ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸàŸÇÿßÿπÿßÿ™ ÿßŸÑÿ≠ŸÅŸÑÿßÿ™.',
                'km away': 'ŸÉŸÖ ÿ®ÿπŸäÿØÿß',
                'Check venue': 'ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÇÿßÿπÿ© ÿßŸÑÿ≠ŸÅŸÑÿßÿ™',
                'Free': 'ŸÖÿ¨ÿßŸÜŸä',
                'TBA': 'ÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ŸÑÿßÿ≠ŸÇŸãÿß'
            }
        };

        const properNameTranslations = {
            'ar': {
                'Melbourne': 'ŸÖŸÑÿ®Ÿàÿ±ŸÜ',
                'Fitzroy': 'ŸÅŸäÿ™ÿ≤ÿ±ŸàŸä',
                'Richmond': 'ÿ±Ÿäÿ™ÿ¥ŸÖŸàŸÜÿØ',
                'venue': 'ŸÇÿßÿπÿ© ÿßŸÑÿ≠ŸÅŸÑÿßÿ™',
                'gig': 'ÿπÿ±ÿ∂ ŸÖŸàÿ≥ŸäŸÇŸä',
                'gigs': 'ÿπÿ±Ÿàÿ∂ ŸÖŸàÿ≥ŸäŸÇŸäÿ©',
            }
        };

        function translateToArabic(text) {
            // Split the text into sections
            const sections = {
                header: '',
                description: '',
                gigsHeader: '',
                gigs: [],
                howToUse: '',
                footer: ''
            };

            // Extract sections using regex
            const headerMatch = text.match(/=== MELBOURNE GIG GUIDE - (.+?) ===/);
            if (headerMatch) {
                sections.date = headerMatch[1];
            }

            const descriptionMatch = text.match(/=== MELBOURNE GIG GUIDE - .+? ===\s+\n\s*(.+?)(?=\s*\n\s*---)/s);
            if (descriptionMatch) {
                sections.description = descriptionMatch[1].trim();
            }

            // Extract gigs
            const gigsRegex = /‚ñ∂ (\d+)\. (.+)[\s\S]*?üè¢ (.+) \| ([\d.]+ km away)[\s\S]*?üìç (.+)[\s\S]*?üïí (.+) \| üí≤ (.+)[\s\S]*?(?:üéµ (.+)[\s\S]*?)?üó∫Ô∏è (.+)[\s\S]*?QR: (.+)/g;
            let gigMatch;
            while ((gigMatch = gigsRegex.exec(text)) !== null) {
                sections.gigs.push({
                    number: gigMatch[1],
                    name: gigMatch[2],
                    venue: gigMatch[3],
                    distance: gigMatch[4],
                    address: gigMatch[5],
                    time: gigMatch[6],
                    price: gigMatch[7],
                    genres: gigMatch[8] ? gigMatch[8].split(',').map(g => g.trim()) : [],
                    mapUrl: gigMatch[9],
                    qrUrl: gigMatch[10]
                });
            }

            // Extract how to use section
            const howToUseMatch = text.match(/=== HOW TO USE ===\s+\n([\s\S]*?)(?=\s*\n\s*---)/);
            if (howToUseMatch) {
                sections.howToUse = howToUseMatch[1].trim();
            }

            // Extract footer
            const footerMatch = text.match(/---\s+\n([\s\S]*?)$/);
            if (footerMatch) {
                sections.footer = footerMatch[1].trim();
            }

            // Now translate each section
            let translatedContent = '';

            // Header (with the date preserved)
            translatedContent += `=== ÿØŸÑŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸäÿ© ŸÅŸä ŸÖŸÑÿ®Ÿàÿ±ŸÜ - ${sections.date} ===\n\n`;

            // Description
            translatedContent += translateParagraph(sections.description, 'ar') + '\n\n';

            // Gigs near you header
            translatedContent += '--- ÿπÿ±Ÿàÿ∂ ŸÖŸàÿ≥ŸäŸÇŸäÿ© ÿ®ÿßŸÑŸÇÿ±ÿ® ŸÖŸÜŸÉ ---\n\n';

            // Gigs
            sections.gigs.forEach((gig, index) => {
                let translatedGig = `‚ñ∂ ${gig.number}. ${gig.name}\n`;
                translatedGig += `   üè¢ ${gig.venue} | ${gig.distance.replace('km away', 'ŸÉŸÖ ÿ®ÿπŸäÿØÿß')}\n`;
                translatedGig += `   üìç ${gig.address}\n`;
                translatedGig += `   üïí ${gig.time} | üí≤ ${translatePhrase(gig.price, 'ar')}\n`;
                
                if (gig.genres && gig.genres.length > 0) {
                    translatedGig += `   üéµ ${gig.genres.join(', ')}\n`;
                }
                
                translatedGig += `   üó∫Ô∏è ${gig.mapUrl}\n`;
                
                // Fix for Arabic translation - ensure we're using the correct terms
                translatedGig = translatedGig.replace(/ŸÖŸÉÿßŸÜ/g, 'ŸÇÿßÿπÿ© ÿßŸÑÿ≠ŸÅŸÑÿßÿ™');
                translatedGig = translatedGig.replace(/ÿ≠ŸÅŸÑÿ©/g, 'ÿπÿ±ÿ∂ ŸÖŸàÿ≥ŸäŸÇŸä');
                
                translatedGig += `   ÿ±ŸÖÿ≤ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπÿ©: ${gig.qrUrl}\n`;
                translatedGig += '   ----------------------\n';
                
                translatedContent += translatedGig;
            });

            // How to use
            translatedContent += '\n=== ŸÉŸäŸÅŸäÿ© ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ===\n';
            const howToUseLines = sections.howToUse.split('\n');
            howToUseLines.forEach(line => {
                if (line.trim()) {
                    translatedContent += translatePhrase(line.trim(), 'ar') + '\n';
                }
            });

            // Footer
            translatedContent += '\n---\n';
            const footerLines = sections.footer.split('\n');
            if (footerLines.length >= 2) {
                const subscriberInfo = footerLines[0];
                const subscriberMatch = subscriberInfo.match(/This information was sent to (.+) at (.+)\./);
                if (subscriberMatch) {
                    translatedContent += `ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ŸÑŸâ ${subscriberMatch[1]} ÿπŸÑŸâ ${subscriberMatch[2]}.\n`;
                } else {
                    translatedContent += translatePhrase(subscriberInfo, 'ar') + '\n';
                }
                
                translatedContent += 'ÿØŸÑŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸäÿ© ŸÅŸä ŸÖŸÑÿ®Ÿàÿ±ŸÜ - ÿØÿπŸÖ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸàŸÇÿßÿπÿßÿ™ ÿßŸÑÿ≠ŸÅŸÑÿßÿ™.\n';
            } else {
                footerLines.forEach(line => {
                    if (line.trim()) {
                        translatedContent += translatePhrase(line.trim(), 'ar') + '\n';
                    }
                });
            }

            return translatedContent;
        }

        function translatePhrase(phrase, targetLang) {
            // Check if we have a direct translation
            if (sentenceTranslations[targetLang] && sentenceTranslations[targetLang][phrase]) {
                return sentenceTranslations[targetLang][phrase];
            }
            
            // Try to translate proper names
            let translatedPhrase = phrase;
            if (properNameTranslations[targetLang]) {
                for (const [original, translated] of Object.entries(properNameTranslations[targetLang])) {
                    const regex = new RegExp(`\\b${original}\\b`, 'gi');
                    translatedPhrase = translatedPhrase.replace(regex, translated);
                }
            }
            
            // If no direct translation found, return original with [AR] prefix
            if (translatedPhrase === phrase) {
                return `[${targetLang.toUpperCase()}] ${phrase}`;
            }
            
            return translatedPhrase;
        }

        function translateParagraph(paragraph, targetLang) {
            // Split paragraph into sentences
            const sentences = paragraph.split(/(?<=[.!?])\s+/);
            
            // Translate each sentence
            const translatedSentences = sentences.map(sentence => 
                translatePhrase(sentence, targetLang)
            );
            
            // Join sentences back together
            return translatedSentences.join(' ');
        }

        document.getElementById('translateBtn').addEventListener('click', function() {
            const testContent = document.getElementById('testContent').textContent;
            const translatedContent = translateToArabic(testContent);
            document.getElementById('translationResult').textContent = translatedContent;
        });
    </script>
</body>
</html>